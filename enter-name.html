<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Enter Your Name</title>
  <link rel="stylesheet" href="enter-style.css">
  <style>
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
      pointer-events: none;
    }

    #loadingMessage {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      color: #ff1493;
      font-family: 'Comic Sans MS', cursive;
      background-color: rgba(255, 255, 255, 0.85);
      padding: 20px 30px;
      border-radius: 20px;
      box-shadow: 0 0 15px #ff69b4;
      z-index: 20;
      display: none;
    }
  </style>
</head>
<body>
  <div class="centered">
    <h2>Hey Birthday Girl üéÇ</h2>
    <p>Type my name to receive your special wish!</p>
    <input type="text" id="nameInput" placeholder="Enter your name..." />
    <button onclick="checkName()">Submit</button>
  </div>

  <canvas id="fireworksCanvas"></canvas>
  <div id="loadingMessage">üéÅ Loading your surprise... üéÜ</div>

  <!-- Firework sound -->
  <audio id="fireworkSound" src="firework.mp3" preload="auto"></audio>

  <script src="music.js"></script>
  <script>
    const canvas = document.getElementById("fireworksCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const fireworkSound = document.getElementById("fireworkSound");
    const loadingMessage = document.getElementById("loadingMessage");

    let particles = [];

    function createFirework(x, y) {
      for (let i = 0; i < 100; i++) {
        particles.push({
          x,
          y,
          angle: Math.random() * 2 * Math.PI,
          speed: Math.random() * 5 + 2,
          radius: Math.random() * 2 + 1,
          color: `hsl(${Math.random() * 360}, 100%, 70%)`,
          alpha: 1
        });
      }
      fireworkSound.currentTime = 0;
      fireworkSound.play();
    }

    function updateParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles = particles.filter(p => p.alpha > 0);
      for (let p of particles) {
        p.x += Math.cos(p.angle) * p.speed;
        p.y += Math.sin(p.angle) * p.speed;
        p.alpha -= 0.01;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.alpha;
        ctx.fill();
        ctx.globalAlpha = 1;
      }
    }

    setInterval(updateParticles, 16);

    function triggerFireworksThenRedirect(toPage) {
      loadingMessage.style.display = "block";

      createFirework(window.innerWidth / 2, window.innerHeight / 2);
      createFirework(Math.random() * canvas.width, Math.random() * canvas.height);
      createFirework(Math.random() * canvas.width, Math.random() * canvas.height);

      setTimeout(() => {
        window.location.href = toPage;
      }, 2500);
    }

    function checkName() {
      const name = document.getElementById("nameInput").value.trim().toLowerCase();
      localStorage.removeItem("musicPlaying");

      if (name === "keshav") {
        triggerFireworksThenRedirect("keshav.html");
      } else if (name === "lekha") {
        triggerFireworksThenRedirect("lekha.html");
      } else {
        alert("Oops! No surprise prepared for this name üòÖ");
      }
    }
  </script>
</body>
</html>

